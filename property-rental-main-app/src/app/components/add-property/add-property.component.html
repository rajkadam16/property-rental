<form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" class="max-w-3xl mx-auto bg-white p-6 shadow-lg rounded-lg">
    
    <!-- Image Gallery Section -->
    <div formArrayName="imgGallery" class="mb-6">
        <h3 class="text-xl font-semibold text-gray-700 mb-2">Image Gallery</h3>
        <div *ngFor="let gallery of imgGalleryArray.controls; let i = index" [formGroupName]="i" class="p-4 border rounded-lg bg-gray-100 mb-4">
            
            <h4 class="text-lg font-medium text-gray-700 mb-2">Gallery {{ i + 1 }}</h4>

            <div formArrayName="images" class="space-y-3">
                <div *ngFor="let image of getImagesControls(gallery); let j = index" [formGroupName]="j" class="flex items-center gap-3">
                    <input formControlName="url" placeholder="Image URL"
                        class="w-full p-2 border rounded-lg focus:ring focus:ring-blue-200">
                    <input formControlName="alt" placeholder="Alt Text"
                        class="w-full p-2 border rounded-lg focus:ring focus:ring-blue-200">
                    <button type="button" (click)="removeImage(i, j)" class="px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600">Remove</button>
                </div>
            </div>

            <div class="flex gap-2 mt-3">
                <button type="button" (click)="addImage(i)" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">Add Image</button>
                <button type="button" (click)="removeImageGallery(i)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">Remove Gallery</button>
            </div>
        </div>

        <button type="button" (click)="addImageGallery()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 w-full">Add Image Gallery</button>
    </div>

    <!-- Property Details Section -->
    <div formGroupName="propertyDetails" class="mb-6">
        <h3 class="text-xl font-semibold text-gray-700 mb-2">Property Details</h3>

        <input formControlName="name" placeholder="Property Name"
            class="w-full p-2 border rounded-lg mb-3 focus:ring focus:ring-blue-200">

        <div formGroupName="address" class="grid grid-cols-2 gap-3">
            <input formControlName="address1" placeholder="Address 1"
                class="w-full p-2 border rounded-lg focus:ring focus:ring-blue-200">
            <input formControlName="city" placeholder="City"
                class="w-full p-2 border rounded-lg focus:ring focus:ring-blue-200">
        </div>
    </div>

    <!-- Amenities Checkboxes -->
    <div class="mb-6">
        <h4 class="text-lg font-semibold text-gray-700 mb-2">Amenities</h4>
        <div class="grid grid-cols-2 gap-3">
            <label *ngFor="let amenity of amenitiesList" class="flex items-center gap-2">
                <input type="checkbox" [value]="amenity" (change)="onAmenityChange($event, amenity)"
                    [checked]="amenitiesArray.value.includes(amenity)" class="w-4 h-4 text-blue-500 border-gray-300 rounded focus:ring focus:ring-blue-200">
                <span class="text-gray-700">{{ amenity }}</span>
            </label>
        </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="w-full bg-indigo-500 text-white p-3 rounded-lg hover:bg-indigo-600 transition" (click)="onSubmit()">Submit</button>

</form>
